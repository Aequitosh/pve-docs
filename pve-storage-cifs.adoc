CIFS Backend
-----------
ifdef::wiki[]
:pve-toplevel:
:title: Storage: CIFS
endif::wiki[]

Storage pool type: `cifs`

The CIFS backend is based on the directory backend, so it shares most
properties. The directory layout and the file naming conventions are
the same. The main advantage is that you can directly configure the
CIFS server, so the backend can mount the share automatically in
the hole cluster. There is no need to modify `/etc/fstab`. The backend
can also test if the server is online, and provides a method to query
the server for exported shares.

Configuration
~~~~~~~~~~~~~

The backend supports all common storage properties, except the shared
flag, which is always set. Additionally, the following properties are
used to configure the CIFS server:

server::

Server IP or DNS name. To avoid DNS lookup delays, it is usually
preferable to use an IP address instead of a DNS name - unless you
have a very reliable DNS server, or list the server in the local
`/etc/hosts` file.

share::

CIFS share (as listed by `pvesm cifsscan`).

Optional properties:

username::

If not presents, "guest" is used.

password::

The user password.
It will be saved in a private directory (/etc/pve/priv/<STORAGE_ID>.cred).

domain::

sets the domain (workgroup) of the user

smbversion::

SMB protocol Version (default is `3`).
SMB1 is not supported due to security issues.

path::

The local mount point (defaults to `/mnt/pve/<STORAGE_ID>/`).

.Configuration Example (`/etc/pve/storage.cfg`)
----
cifs: backup
	path /mnt/pve/backup
	server 10.0.0.11
	share VMData
	content backup
	username anna
	smbversion 3

----

Storage Features
~~~~~~~~~~~~~~~~

CIFS does not support snapshots, but the backend uses `qcow2` features
to implement snapshots and cloning.

.Storage features for backend `nfs`
[width="100%",cols="m,m,3*d",options="header"]
|==============================================================================
|Content types                     |Image formats         |Shared |Snapshots |Clones
|images rootdir vztmpl iso backup  |raw qcow2 vmdk subvol |yes    |qcow2     |qcow2
|==============================================================================

Examples
~~~~~~~~

You can get a list of exported CIFS shares with:

 # pvesm cifsscan <server> [--username <username>] [--password]

ifdef::wiki[]

See Also
~~~~~~~~

* link:/wiki/Storage[Storage]

endif::wiki[]
